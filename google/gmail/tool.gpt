---
Name: Gmail
Description: Tools for interacting with a user's Gmail account
Metadata: bundle: true
Share Tools: Current Email, List Inbox, Read Email, Send Email, Delete Email, List Drafts, Create Draft, Update Draft, Delete Draft, Send Draft, List Attachments, Download Attachment, Read Attachment

---
Name: Current Email
Description: Gets the email address of the currently signed in user
Credential: ../credential

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/currentEmail.py

---
Name: List Inbox
Description: List emails in the user's Gmail account. By default, this will list emails in the inbox, but if any query is provided, it will list all emails that match the query. Supports filtering by labels, category, and query.
Credential: ../credential
Share Contexts: Email List Context
Tools: github.com/gptscript-ai/datasets/filter
Param: labels: (Optional: Default is 'inbox') The labels to list emails from, must be a comma separated list of labels. Valid built-in labels are 'inbox', 'starred', 'important', 'sent', 'drafts', 'trash', 'spam', 'all', as well as any custom labels the user has created. 
Param: category: (Optional: Default is 'primary') The category of emails to list, only valid when `inbox` is in the labels list. Valid options are 'primary', 'social', 'promotions', 'updates', 'forums'. 
Param: after: (Optional) Return only emails received strictly **after** this timestamp. Format: `YYYY-MM-DDTHH:MM:SS±HH:MM` (ISO 8601 format with timezone offset). 
Param: before: (Optional) Return only emails received strictly **before** this timestamp. Format: `YYYY-MM-DDTHH:MM:SS±HH:MM` (ISO 8601 format with timezone offset). Time and timezone are required. (Optional)
Param: query: (Optional) Search query in Gmail search syntax (e.g., "from:someuser@example.com rfc822msgid:<somemsgid@example.com> is:unread"). Don't use `before` or `after` in the query.
Param: max_results: (Optional) Maximum number of emails to list, default is 100 

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/list_emails.py

---
Name: Read Email
Description: Read an email or draft from the user's Gmail account
Credential: ../credential
Share Tools: List Inbox, List Drafts
Param: email_id: Email or Draft ID to read (Optional: If not provided, email_subject is required)
Param: email_subject: Email subject to read (Optional: If not provided, email_id is required)

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/readEmail.py


---
Name: Send Email
Description: Send an email from the user's Gmail account. Do not attempt to forward or reply to emails using this tool.
Credential: ../credential
Param: to_emails: A comma separated list of email addresses to send the email to
Param: cc_emails: A comma separated list of email addresses to cc the email to (Optional)
Param: bcc_emails: A comma separated list of email addresses to bcc the email to (Optional)
Param: subject: Subject of the email.
Param: message: Message body of the email.

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/sendEmail.py

---
Name: Delete Email
Description: Delete an email in a user's Gmail account.
Credential: ../credential
Share Tools: List Inbox
Param: email_id: The ID of the email to delete

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/deleteEmail.py

---
Name: List Drafts
Description: List drafts in a user's Gmail account
Credential: ../credential
Share Contexts: Email List Context
Tools: github.com/gptscript-ai/datasets/filter
Param: max_results: Maximum number of drafts to list (Optional: Default will list 100 drafts)
Param: attachments: A comma separated list of workspace file paths to attach to the email (Optional)

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/listDrafts.py

---
Name: Create Draft
Description: Create a draft email in a user's Gmail account.
Credential: ../credential
Share Context: Draft Context
Param: to_emails: A comma separated list of email addresses to send the email to
Param: cc_emails: A comma separated list of email addresses to cc the email to (Optional)
Param: bcc_emails: A comma separated list of email addresses to bcc the email to (Optional)
Param: reply_to_email_id: The ID of the email to reply to (Optional)
Param: reply_all: Whether to reply to all (Optional: Default is false)
Param: subject: Subject of the email
Param: message: Message body of the email
Param: attachments: A comma separated list of workspace file paths to attach to the email (Optional)

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/createDraft.py

---
Name: Update Draft
Description: Update a draft email in a user's Gmail account.
Share Context: Draft Context
Credential: ../credential
Share Tools: List Drafts, Read Email
Param: draft_id: The ID of the draft email to update
Param: to_emails: A comma separated list of email addresses to send the email to
Param: cc_emails: A comma separated list of email addresses to cc the email to (Optional)
Param: bcc_emails: A comma separated list of email addresses to bcc the email to (Optional)
Param: reply_to_email_id: The ID of the email to reply to (Optional)
Param: reply_all: Whether to reply to all (Optional: Default is false)
Param: subject: Subject of the email
Param: message: Message body of the email
Param: attachments: A comma separated list of workspace file paths to attach to the email (Optional)

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/updateDraft.py

---
Name: Delete Draft
Description: Delete a draft email in a user's Gmail account.
Share Context: Draft Context
Credential: ../credential
Share Tools: List Drafts, Read Email
Param: draft_id: The ID of the draft email to delete

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/deleteDraft.py

---
Name: Send Draft
Description: Send a draft email in a user's Gmail account.
Share Context: Draft Context
Credential: ../credential
Share Tools: List Drafts, Read Email, Create Draft, Update Draft
Param: draft_id: The ID of the draft email to send

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/sendDraft.py

---
Name: List Attachments
Description: List attachments in an email from a user's Gmail account.
Credential: ../credential
Share Context: Email List Context
Param: email_id: The ID of the email to list attachments from

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/listAttachments.py

---
Name: Download Attachment
Description: Download an attachment from an email in a user's Gmail account.
Credential: ../credential
Share Context: Email List Context
Share Tools: List Attachments
Param: email_id: The ID of the email containing the attachment
Param: attachment_id: The ID of the attachment to download
Param: filename: The name of the attachment to download

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/downloadAttachment.py

---
Name: Read Attachment
Description: Read an attachment from an email in a user's Gmail account.
Credential: ../credential
Share Context: Email List Context
Share Tools: List Attachments
Param: email_id: The ID of the email containing the attachment
Param: attachment_id: The ID of the attachment to read

#!/usr/bin/env python3 ${GPTSCRIPT_TOOL_DIR}/getAttachment.py

---
Name: Draft Context
Type: context

#!sys.echo

## Instructions for Creating, Updating, Deleting, or Sending a Draft Email

If more information about a draft email is required before updating, deleting, or sending it,
retrieve the contents of the current draft using the Read Email tool.

Forwarding emails is not a supported operation.
Drafts should not be used to provide indirect support for these operations.
Do not assist the user with drafting an email to forward an email in any way.


## End of instructions for Updating, Deleting, or Sending a Draft Email

---
Name: Email List Context
Type: context

#!sys.echo

## Instructions for getting emails from a dataset

When you list the element in a dataset that contains emails, the element names will be the email IDs.
These email IDs are not useful to the user, so don't show them to the user.
Instead, get the contents of the elements and display that to the user.

## End of instructions for getting emails from a dataset

---
!metadata:*:icon
/admin/assets/gmail_icon_small.png

---
!metadata:*:oauth
google